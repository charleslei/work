var Hogan={};(function(k,h){k.Template=function(p,q,o,n){this.r=p||this.r;this.c=o;this.options=n;this.text=q||"";this.buf=(h)?[]:"";};k.Template.prototype={r:function(p,o,n){return"";},v:c,t:e,render:function b(p,o,n){return this.ri([p],o||{},n);},ri:function(p,o,n){return this.r(p,o,n);},rp:function(p,r,q,n){var o=q[p];if(!o){return"";}if(this.c&&typeof o=="string"){o=this.c.compile(o,this.options);}return o.ri(r,q,n);},rs:function(q,p,r){var n=q[q.length-1];if(!g(n)){r(q,p,this);return;}for(var o=0;o<n.length;o++){q.push(n[o]);r(q,p,this);q.pop();}},s:function(u,o,r,p,v,n,q){var s;if(g(u)&&u.length===0){return false;}if(typeof u=="function"){u=this.ls(u,o,r,p,v,n,q);}s=(u==="")||!!u;if(!p&&s&&o){o.push((typeof u=="object")?u:o[o.length-1]);}return s;},d:function(r,o,q,s){var u=r.split("."),v=this.f(u[0],o,q,s),n=null;if(r==="."&&g(o[o.length-2])){return o[o.length-1];}for(var p=1;p<u.length;p++){if(v&&typeof v=="object"&&u[p] in v){n=v;v=v[u[p]];}else{v="";}}if(s&&!v){return false;}if(!s&&typeof v=="function"){o.push(n);v=this.lv(v,o,q);o.pop();}return v;},f:function(r,n,q,s){var w=false,o=null,u=false;for(var p=n.length-1;p>=0;p--){o=n[p];if(o&&typeof o=="object"&&r in o){w=o[r];u=true;break;}}if(!u){return(s)?false:"";}if(!s&&typeof w=="function"){w=this.lv(w,n,q);}return w;},ho:function(u,n,q,s,p){var r=this.c;var o=this.options;o.delimiters=p;var s=u.call(n,s);s=(s==null)?String(s):s.toString();this.b(r.compile(s,o).render(n,q));return false;},b:(h)?function(n){this.buf.push(n);}:function(n){this.buf+=n;},fl:(h)?function(){var n=this.buf.join("");this.buf=[];return n;}:function(){var n=this.buf;this.buf="";return n;},ls:function(o,v,s,p,n,q,w){var r=v[v.length-1],u=null;if(!p&&this.c&&o.length>0){return this.ho(o,r,s,this.text.substring(n,q),w);}u=o.call(r);if(typeof u=="function"){if(p){return true;}else{if(this.c){return this.ho(u,r,s,this.text.substring(n,q),w);}}}return u;},lv:function(r,p,q){var o=p[p.length-1];var n=r.call(o);if(typeof n=="function"){n=e(n.call(o));if(this.c&&~n.indexOf("{\u007B")){return this.c.compile(n,this.options).render(o,q);}}return e(n);}};var j=/&/g,d=/</g,a=/>/g,m=/\'/g,l=/\"/g,f=/[&<>\"\']/;function e(n){return String((n===null||n===undefined)?"":n);}function c(n){n=e(n);return f.test(n)?n.replace(j,"&amp;").replace(d,"&lt;").replace(a,"&gt;").replace(m,"&#39;").replace(l,"&quot;"):n;}var g=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]";};})(typeof exports!=="undefined"?exports:Hogan);(function(o){var f=/\S/,k=/\"/g,p=/\n/g,l=/\r/g,w=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};o.scan=function n(I,D){var Q=I.length,A=0,F=1,z=2,B=A,E=null,S=null,R="",L=[],H=false,P=0,M=0,J="{{",O="}}";function N(){if(R.length>0){L.push(new String(R));R="";}}function C(){var U=true;for(var T=M;T<L.length;T++){U=(L[T].tag&&a[L[T].tag]<a._v)||(!L[T].tag&&L[T].match(f)===null);if(!U){return false;}}return U;}function K(W,T){N();if(W&&C()){for(var U=M,V;U<L.length;U++){if(!L[U].tag){if((V=L[U+1])&&V.tag==">"){V.indent=L[U].toString();}L.splice(U,1);}}}else{if(!T){L.push({tag:"\n"});}}H=false;M=L.length;}function G(X,U){var W="="+O,T=X.indexOf(W,U),V=r(X.substring(X.indexOf("=",U)+1,T)).split(" ");J=V[0];O=V[1];return T+W.length-1;}if(D){D=D.split(" ");J=D[0];O=D[1];}for(P=0;P<Q;P++){if(B==A){if(y(J,I,P)){--P;N();B=F;}else{if(I.charAt(P)=="\n"){K(H);}else{R+=I.charAt(P);}}}else{if(B==F){P+=J.length-1;S=a[I.charAt(P+1)];E=S?I.charAt(P+1):"_v";if(E=="="){P=G(I,P);B=A;}else{if(S){P++;}B=z;}H=P;}else{if(y(O,I,P)){L.push({tag:E,n:r(R),otag:J,ctag:O,i:(E=="/")?H-O.length:P+J.length});R="";P+=O.length-1;B=A;if(E=="{"){if(O=="}}"){P++;}else{s(L[L.length-1]);}}}else{R+=I.charAt(P);}}}}K(H,true);return L;};function s(z){if(z.n.substr(z.n.length-1)==="}"){z.n=z.n.substring(0,z.n.length-1);}}function r(z){if(z.trim){return z.trim();}return z.replace(/^\s*|\s*$/g,"");}function y(z,D,B){if(D.charAt(B)!=z.charAt(0)){return false;}for(var C=1,A=z.length;C<A;C++){if(D.charAt(B+C)!=z.charAt(C)){return false;}}return true;}function b(F,C,A,E){var z=[],D=null,B=null;while(F.length>0){B=F.shift();if(B.tag=="#"||B.tag=="^"||e(B,E)){A.push(B);B.nodes=b(F,B.tag,A,E);z.push(B);}else{if(B.tag=="/"){if(A.length===0){throw new Error("Closing tag without opener: /"+B.n);}D=A.pop();if(B.n!=D.n&&!g(B.n,D.n,E)){throw new Error("Nesting error: "+D.n+" vs. "+B.n);}D.end=B.i;return z;}else{z.push(B);}}}if(A.length>0){throw new Error("missing closing tag: "+A.pop().n);}return z;}function e(C,A){for(var B=0,z=A.length;B<z;B++){if(A[B].o==C.n){C.tag="#";return true;}}}function g(D,B,A){for(var C=0,z=A.length;C<z;C++){if(A[C].c==D&&A[C].o==B){return true;}}}o.generate=function(z,C,A){var B='var _=this;_.b(i=i||"");'+v(z)+"return _.fl();";if(A.asString){return"function(c,p,i){"+B+";}";}return new o.Template(new Function("c","p","i",B),C,o,A);};function x(z){return z.replace(w,"\\\\").replace(k,'\\"').replace(p,"\\n").replace(l,"\\r");}function j(z){return(~z.indexOf("."))?"d":"f";}function v(A){var D="";for(var C=0,B=A.length;C<B;C++){var z=A[C].tag;if(z=="#"){D+=h(A[C].nodes,A[C].n,j(A[C].n),A[C].i,A[C].end,A[C].otag+" "+A[C].ctag);}else{if(z=="^"){D+=u(A[C].nodes,A[C].n,j(A[C].n));}else{if(z=="<"||z==">"){D+=d(A[C]);}else{if(z=="{"||z=="&"){D+=c(A[C].n,j(A[C].n));}else{if(z=="\n"){D+=m('"\\n"'+(A.length-1==C?"":" + i"));}else{if(z=="_v"){D+=q(A[C].n,j(A[C].n));}else{if(z===undefined){D+=m('"'+x(A[C])+'"');}}}}}}}}return D;}function h(A,E,D,C,z,B){return"if(_.s(_."+D+'("'+x(E)+'",c,p,1),c,p,0,'+C+","+z+',"'+B+'")){_.rs(c,p,function(c,p,_){'+v(A)+"});c.pop();}";}function u(z,B,A){return"if(!_.s(_."+A+'("'+x(B)+'",c,p,1),c,p,1,0,0,"")){'+v(z)+"};";}function d(z){return'_.b(_.rp("'+x(z.n)+'",c,p,"'+(z.indent||"")+'"));';}function c(A,z){return"_.b(_.t(_."+z+'("'+x(A)+'",c,p,0)));';}function q(A,z){return"_.b(_.v(_."+z+'("'+x(A)+'",c,p,0)));';}function m(z){return"_.b("+z+");";}o.parse=function(A,B,z){z=z||{};return b(A,"",[],z.sectionTags||[]);},o.cache={};o.compile=function(C,z){z=z||{};var B=C+"||"+!!z.asString;var A=this.cache[B];if(A){return A;}A=this.generate(this.parse(this.scan(C,z.delimiters),C,z),C,z);return this.cache[B]=A;};})(typeof exports!=="undefined"?exports:Hogan);if(typeof define==="function"&&define.amd){define(Hogan);}(function(b){if(typeof b.QNR==="undefined"){b.QNR={};}if(typeof b.QNR.lang==="undefined"){b.QNR.lang={};}var a=function(f,e){if(arguments.length!=2){throw new Error("Interface constructor called with "+arguments.length+"arguments, but expected exactly 2.");}this.name=f;this.methods=[];for(var g=0,d=e.length;g<d;g++){if(typeof e[g]!=="string"){throw new Error("Interface constructor expects method names to be passed in as a string.");}this.methods.push(e[g]);}};a.ensureImplements=function(g){if(arguments.length<2){throw new Error("Function Interface.ensureImplements called with "+arguments.length+"arguments, but expected at least 2.");}for(var h=1,e=arguments.length;h<e;h++){var d=arguments[h];if(d.constructor!==a){throw new Error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface.");}for(var f=0,k=d.methods.length;f<k;f++){var l=d.methods[f];if(!g[l]||typeof g[l]!=="function"){throw new Error("Function Interface.ensureImplements: object does not implement the "+d.name+" interface. Method "+l+" was not found.");}}}};var c=function(f,d){var e=function(){};e.prototype=d.prototype;f.prototype=new e();f.prototype.constructor=f;f.superclass=d.prototype;if(d.prototype.constructor==Object.prototype.constructor){d.prototype.constructor=d;}};QNR.lang.Interface=a;QNR.lang.extend=c;})(this);(function(b){if(typeof b.QNR==="undefined"){b.QNR={};}if(typeof b.QNR.util==="undefined"){b.QNR.util={};}var e=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return"";}};var a=function(j,h,f,g){h=h||"&";f=f||"=";if(j===null){j=undefined;}if(typeof j==="object"){return Object.keys(j).map(function(l){var m=encodeURIComponent(e(l))+f;if(Array.isArray(j[l])){return j[l].map(function(k){return m+encodeURIComponent(e(k));}).join(h);}else{return m+encodeURIComponent(e(j[l]));}}).join(h);}if(!g){return"";}return encodeURIComponent(e(g))+f+encodeURIComponent(e(j));};var c=function(f,g){return Object.prototype.hasOwnProperty.call(f,g);};var d=function(m,w,u,y){w=w||"&";u=u||"=";var h={};if(typeof m!=="string"||m.length===0){return h;}var l=/\+/g;m=m.split(w);var p=1000;if(y&&typeof y.maxKeys==="number"){p=y.maxKeys;}var j=m.length;if(p>0&&j>p){j=p;}for(var g=0;g<j;++g){var o=m[g].replace(l,"%20"),q=o.indexOf(u),n,s,f,r;if(q>=0){n=o.substr(0,q);s=o.substr(q+1);}else{n=o;s="";}f=decodeURIComponent(n);r=decodeURIComponent(s);if(!c(h,f)){h[f]=r;}else{if(Array.isArray(h[f])){h[f].push(r);}else{h[f]=[h[f],r];}}}return h;};QNR.util.encode=QNR.util.stringify=a;QNR.util.decode=QNR.util.parse=d;})(this);(function(d){if(typeof d.QNR==="undefined"){d.QNR={};}if(typeof d.QNR.util==="undefined"){d.QNR.util={};}var b=d.location.host,a=d.document;var f=function(j,m,q,k){if(!j){return;}k=k||{};m=m||{};var r=k.timeout||0,h="crossDomainPostUserCenter"+new Date().getTime(),l=false;var g=function(){if(l){return;}if(k.ontimeout){k.ontimeout(j,m,q,h);}p();};var s=function(v){if(l){return;}if(k.onsuccess){k.onsuccess(v);}p();};var p=function(){var v=a.getElementById(h);v.parentNode.removeChild(v);l=true;d[h]=null;};d[h]=s;var o=c(j,q,m,h,h),n=a.createElement("div");n.style.display="none";n.id=h;n.innerHTML=o;a.body.appendChild(n);var u=a.getElementById("form"+h);u.submit();if(r){setTimeout(g,r);}return h;};function c(j,p,n,r,g){var l=[];var o=e(j,p,r,g),h="ifr"+g,q="form"+g;l.push('<form id="'+q+'" target="'+h+'" action="'+o+'" method="POST">');for(var m in n){if(n.hasOwnProperty(m)){l.push('<input type="text" name="'+m+'" value="'+n[m]+'" />');}}l.push('<input id="hostname" name="" value="'+b+'" />');l.push('<input id="proxypath" name="" value="'+p+'" />');l.push('<input id="crosscall" name="" value="'+r+'" />');l.push('<input id="frameid" name="frameid" value="'+g+'" /></form>');l.push('<iframe name="'+h+'" id="'+h+'" src="about:blank"></iframe>');return l.join("");}function e(h,m,j,g){var k=b,l=h.indexOf("#"),n=[h];var o=l<0?"#":h.substr(l);n[n.length]=o;if(o.replace(/#/g,"").length){n.push("&");}var p=a.location.protocol?a.location.protocol:"http:";n[n.length]="crosspath="+encodeURIComponent(p+"//"+k+"/"+m);n[n.length]="&";n[n.length]="crosscall="+encodeURIComponent(j);n[n.length]="&";n[n.length]="frameid="+g;return n.join("");}QNR.util.crossDomainPostUserCenter=f;})(this);(function(a){if(typeof a.QNR==="undefined"){a.QNR={};}if(typeof a.QNR.util==="undefined"){a.QNR.util={};}var b=function(){};b.createXhrObject=function(){if(typeof XMLHttpRequest==="undefined"){return null;}var c=new XMLHttpRequest();if("withCredentials" in c){}else{if(typeof XDomainRequest!="undefined"){c=null;}else{c=null;}}return c;};b.request=function(f,h,c,e,g){if(!f){throw new Error("CrossDomainXhr: xhr is not an XHR object.");return;}if("withCredentials" in f){f.open(h,c,true);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");f.withCredentials=true;}else{if(typeof XDomainRequest!="undefined"){f.open(h,c);}}f.onload=function(){g.success(JSON.parse(f.responseText));};f.onerror=function(){g.failure(f.status);};var d=QNR.util.stringify(e);f.send(d);};QNR.util.CrossDomainXhr=b;})(this);if(typeof QTMPL==="undefined"){var QTMPL={};}QTMPL.LoginLayer=new Hogan.Template(function(e,d,b){var a=this;a.b(b=b||"");a.b('<div class="');a.b(a.v(a.f("className",e,d,0)));a.b('"\r');a.b("\n"+b);a.b('	style="" id="');a.b(a.v(a.f("name",e,d,0)));a.b('">\r');a.b("\n"+b);a.b('	<div class="login_content ');if(a.s(a.f("union",e,d,1),e,d,0,91,109,"{{ }}")){a.rs(e,d,function(h,g,f){f.b("login_content_lvtu");});e.pop();}a.b('">\r');a.b("\n"+b);a.b('		<div class="login_content_head">\r');a.b("\n"+b);a.b('			<span>登 录</span> <span id="');a.b(a.v(a.f("name",e,d,0)));a.b('ClosePop"\r');a.b("\n"+b);a.b('				class="login_close login_icon">关闭</span>\r');a.b("\n"+b);a.b("		</div>\r");a.b("\n"+b);a.b('		<div class="login_content_body clrfix ">\r');a.b("\n"+b);a.b('			<div class="login_regular f_l login_cut">\r');a.b("\n"+b);a.b('				<form class="login_form" method="post"\r');a.b("\n"+b);a.b('					action="http://user.qunar.com/webApi/logins.jsp">\r');a.b("\n"+b);a.b('					<div class="login_type">\r');a.b("\n"+b);a.b('						<span class="active f_l"> <input type="radio"\r');a.b("\n"+b);a.b('							id="');a.b(a.v(a.f("name",e,d,0)));a.b('ptlogin" value="normal" name="loginType"\r');a.b("\n"+b);a.b('							checked="checked"><label for="');a.b(a.v(a.f("name",e,d,0)));a.b('ptlogin">普通登录</label>\r');a.b("\n"+b);a.b('						</span> <span class="f_r"> <input type="radio"\r');a.b("\n"+b);a.b('							id="');a.b(a.v(a.f("name",e,d,0)));a.b('celogin" value="mobile" name="loginType"><label\r');a.b("\n"+b);a.b('							for="');a.b(a.v(a.f("name",e,d,0)));a.b('celogin">手机动态密码登录</label> </span>\r');a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b("					<!-- 普通登录 begin-->\r");a.b("\n"+b);a.b('					<div class="login_name bd_gray" data-type="normal">\r');a.b("\n"+b);a.b('						<label class="uin_tips">手机号码/注册邮箱/用户名</label>\r');a.b("\n"+b);a.b('						<div class="inputouter inputouter-icon">\r');a.b("\n"+b);a.b('							<span class="login_icon login_icon_name"></span> <input\r');a.b("\n"+b);a.b('								type="text" class="txt-login-input" name="username">\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_pass bd_gray" data-type="normal">\r');a.b("\n"+b);a.b('						<label class="uin_tips">请输入密码</label>\r');a.b("\n"+b);a.b('						<div class="inputouter inputouter-icon">\r');a.b("\n"+b);a.b('							<span class="login_icon login_icon_pass"></span> <input\r');a.b("\n"+b);a.b('								type="password" class="txt-login-input" name="password">\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_check_code" data-type="normal">\r');a.b("\n"+b);a.b('						<label class="uin_tips uin_tips_cod">请输入验证码</label>\r');a.b("\n"+b);a.b('						<div class="inputouter">\r');a.b("\n"+b);a.b('							<img width="105" height="30" style="cursor:pointer"\r');a.b("\n"+b);a.b('								src="');a.b(a.v(a.f("imageCheck",e,d,0)));a.b('"\r');a.b("\n"+b);a.b('								id="');a.b(a.v(a.f("name",e,d,0)));a.b('vcodeImg" class="f_r" alt="" title="看不清？换一个" onclick="javascript:$(\'#');a.b(a.v(a.f("name",e,d,0)));a.b("vcodeImg').attr('src','");a.b(a.v(a.f("imageCheck",e,d,0)));a.b("&amp;t='+new Date().getTime())\"> <input\r");a.b("\n"+b);a.b('								type="text" class="txt-login-input" name="vcode"> <a\r');a.b("\n"+b);a.b('								class="login_reset_check_code" href="javascript:;" name="');a.b(a.v(a.f("name",e,d,0)));a.b('vcodeImg">换一个</a>\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b("					<!-- 普通登录 end-->\r");a.b("\n"+b);a.b("					<!-- 动态密码登录 begin-->\r");a.b("\n"+b);a.b('					<div class="login_name bd_gray" data-type="mobile" style="display:none;">\r');a.b("\n"+b);a.b('						<label class="uin_tips">请输入注册的手机号码</label>\r');a.b("\n"+b);a.b('						<div class="inputouter inputouter-icon">\r');a.b("\n"+b);a.b('							<span class="login_icon login_icon_name"></span> <input\r');a.b("\n"+b);a.b('								type="text" class="txt-login-input" name="mobile">\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_check_code" data-type="mobile" style="display:none;">\r');a.b("\n"+b);a.b('						<label class="uin_tips uin_tips_cod">请输入验证码</label>\r');a.b("\n"+b);a.b('						<div class="inputouter">\r');a.b("\n"+b);a.b('							<img width="105" height="30" style="cursor:pointer"\r');a.b("\n"+b);a.b('								src="');a.b(a.v(a.f("imageCheck",e,d,0)));a.b('"\r');a.b("\n"+b);a.b('								id="');a.b(a.v(a.f("name",e,d,0)));a.b('vcodeImgMobile" class="f_r" alt="" onclick="javascript:$(\'#');a.b(a.v(a.f("name",e,d,0)));a.b("vcodeImgMobile').attr('src','");a.b(a.v(a.f("imageCheck",e,d,0)));a.b("&amp;t='+new Date().getTime())\"> \r");a.b("\n"+b);a.b('								<input type="text" class="txt-login-input" name="vcodeMobile"> <a\r');a.b("\n"+b);a.b('								class="login_reset_check_code" href="javascript:;" name="');a.b(a.v(a.f("name",e,d,0)));a.b('vcodeImgMobile">换一个</a>\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_check_code clrfix" data-type="mobile" style="display:none;">\r');a.b("\n"+b);a.b('						<label class="uin_tips uin_tips">请输入动态码</label>\r');a.b("\n"+b);a.b('						<div class="inputouter txt_login_ym inputouter-icon">\r');a.b("\n"+b);a.b('							<span class="login_icon login_icon_pass"></span> <input\r');a.b("\n"+b);a.b('								type="text" class="txt-login-input txt_igin_ico" name="randcode">\r');a.b("\n"+b);a.b("						</div>\r");a.b("\n"+b);a.b('						<span data-type="getVerifyCode"> <a\r');a.b("\n"+b);a.b('							class="f_r login_icon login_btn_blue" href="javascript:;">获取手机动态码</a>\r');a.b("\n"+b);a.b("						</span>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b("					<!-- 动态密码登录 end-->\r");a.b("\n"+b);a.b('					<div class="login_notice" data-type="notice" ');if(!a.s(a.f("notice",e,d,1),e,d,1,0,0,"")){a.b('style="display:none;"');}a.b(">\r");a.b("\n"+b);a.b('						<i class="login_icon login_icon_cue"></i><span>');a.b(a.v(a.f("notice",e,d,0)));a.b("</span>\r");a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_remeber" name="login_remeber">\r');a.b("\n"+b);a.b('						<span id="remeber_pass">\r');a.b("\n"+b);a.b('						<a class="f_r" href="http://user.qunar.com/passport/forgotpwd.jsp" target="_blank">忘记密码？</a> \r');a.b("\n"+b);a.b("						</span>\r");a.b("\n"+b);if(a.s(a.f("twoWeek",e,d,1),e,d,0,4028,4206,"{{ }}")){a.rs(e,d,function(h,g,f){f.b("						<span>\r");f.b("\n"+b);f.b('						<input type="checkbox" id="');f.b(f.v(f.f("name",h,g,0)));f.b('auto_but" name="remember" class="login_icon_checked"><label for="');f.b(f.v(f.f("name",h,g,0)));f.b('auto_but">两周内自动登录</label>\r');f.b("\n"+b);f.b("						</span>\r");f.b("\n");});e.pop();}a.b("					</div>\r");a.b("\n"+b);a.b('					<div class="login_submit">\r');a.b("\n"+b);a.b('						<button class="login_icon login_btn_orange" type="submit"\r');a.b("\n"+b);a.b('							data-type="login">登 &nbsp; 录</button>\r');a.b("\n"+b);a.b("					</div>\r");a.b("\n"+b);if(a.s(a.f("regFlag",e,d,1),e,d,0,4407,4624,"{{ }}")){a.rs(e,d,function(h,g,f){f.b('					<div class="fieldset clrfix">\r');f.b("\n"+b);f.b('						<a class="f_r"\r');f.b("\n"+b);f.b("							href=\"javascript:window.location='http://user.qunar.com/passport/register.jsp?ret=http%253A%252F%252Fwww.qunar.com%252F'\">免费注册</a>\r");f.b("\n"+b);f.b("					</div>\r");f.b("\n");});e.pop();}a.b("				</form>\r");a.b("\n"+b);a.b("				<!--\\手机登陆-->\r");a.b("\n"+b);a.b("			</div>\r");a.b("\n"+b);if(a.s(a.f("union",e,d,1),e,d,0,4693,5235,"{{ }}")){a.rs(e,d,function(h,g,f){f.b('			<div class="login_unite">\r');f.b("\n"+b);f.b("				<h2>用合作网站登陆</h2>\r");f.b("\n"+b);f.b("				<p>\r");f.b("\n"+b);f.b('					<a href="http://oauth.qunar.com/oauth-client/sina/login?appname=www&ret=http%253A%252F%252Fwww.qunar.com%252F&method=login&vistor=http://user.qunar.com/oauth/login.jsp?"\r');f.b("\n"+b);f.b('						class="login_icon login_btn_sina">新浪微博</a>\r');f.b("\n"+b);f.b("				</p>\r");f.b("\n"+b);f.b("				<p>\r");f.b("\n"+b);f.b('					<a href="http://oauth.qunar.com/oauth-client/qq/login?ret=http%253A%252F%252Fwww.qunar.com%252F&method=login&vistor=http://user.qunar.com/oauth/login.jsp?"\r');f.b("\n"+b);f.b('						class="login_icon login_btn_qq">QQ账号</a>\r');f.b("\n"+b);f.b("				</p>\r");f.b("\n"+b);f.b("			</div>\r");f.b("\n");});e.pop();}a.b("		</div>\r");a.b("\n"+b);a.b("	</div>\r");a.b("\n"+b);a.b("</div>\r");a.b("\n"+b);a.b("\r");a.b("\n");return a.fl();});if(typeof QTMPL==="undefined"){var QTMPL={};}QTMPL.RegLayer=new Hogan.Template(function(e,d,b){var a=this;a.b(b=b||"");a.b('<div class="');a.b(a.v(a.f("className",e,d,0)));a.b('" style="" id="');a.b(a.v(a.f("name",e,d,0)));a.b('">\r');a.b("\n"+b);a.b('	<div class="login_content">\r');a.b("\n"+b);a.b('		<div class="login_content_head">\r');a.b("\n"+b);a.b('			快速注册 <span class="login_close login_icon" id="');a.b(a.v(a.f("name",e,d,0)));a.b('ClosePop">关闭</span>\r');a.b("\n"+b);a.b("		</div>\r");a.b("\n"+b);a.b('		<div class="login_content_body clrfix">\r');a.b("\n"+b);a.b('			<div class="login_regular">\r');a.b("\n"+b);a.b('				<form class="reg_form" method="post">\r');a.b("\n"+b);a.b("					<table>\r");a.b("\n"+b);a.b("						<tbody>\r");a.b("\n"+b);a.b("							<tr>\r");a.b("\n"+b);a.b("								<td>手机号</td>\r");a.b("\n"+b);a.b("								<td>\r");a.b("\n"+b);a.b('									<div class="login_phone bd_gray">\r');a.b("\n"+b);a.b('										<label class="uin_tips">请输入注册的手机号码</label>\r');a.b("\n"+b);a.b('										<div class="inputouter inputouter-icon">\r');a.b("\n"+b);a.b('											<span class="login_icon login_icon_phone"></span> \r');a.b("\n"+b);a.b('											<input type="text" name="mobile" class="txt-login-input login_numbel">\r');a.b("\n"+b);a.b("										</div>\r");a.b("\n"+b);a.b("									</div>\r");a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("							</tr>\r");a.b("\n"+b);a.b("							<tr>\r");a.b("\n"+b);a.b('								<td><div class="p_t_20">验证码</div>\r');a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("								<td>\r");a.b("\n"+b);a.b('								<div class="login_check_code">\r');a.b("\n"+b);a.b('								    <label class="uin_tips uin_tips_cod">请输入验证码</label>\r');a.b("\n"+b);a.b('									<div class="inputouter">\r');a.b("\n"+b);a.b('										<img width="105" height="30" src="');a.b(a.v(a.f("imageCheck",e,d,0)));a.b('" style="cursor:pointer" id="');a.b(a.v(a.f("name",e,d,0)));a.b('vcodeImg" class="f_r" alt="" title="看不清？换一个" onclick="javascript:$(\'#');a.b(a.v(a.f("name",e,d,0)));a.b("vcodeImg').attr('src','");a.b(a.v(a.f("imageCheck",e,d,0)));a.b("&amp;t='+new Date().getTime())\">\r");a.b("\n"+b);a.b('										<input type="text" class="txt-login-input" name="vcode">								\r');a.b("\n"+b);a.b("									</div>\r");a.b("\n"+b);a.b("								</div>\r");a.b("\n"+b);a.b("\r");a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("							</tr>\r");a.b("\n"+b);a.b("							<tr>\r");a.b("\n"+b);a.b('								<td><div class="p_t_20">动态码</div>\r');a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("								<td>\r");a.b("\n"+b);a.b('								<div class="login_check_code clrfix">\r');a.b("\n"+b);a.b('									<label class="uin_tips">请输入动态码</label>\r');a.b("\n"+b);a.b('									<div class="inputouter txt_login_ym inputouter-icon">\r');a.b("\n"+b);a.b('										<span class="login_icon login_icon_pass"></span> \r');a.b("\n"+b);a.b('										<input type="text" class="txt-login-input txt_igin_ico" name="randcode">\r');a.b("\n"+b);a.b("									</div>\r");a.b("\n"+b);a.b('									<span data-type="getVerifyCode">\r');a.b("\n"+b);a.b('										<a class="f_r login_icon login_btn_blue" href="javascript:;">获取手机动态码</a>\r');a.b("\n"+b);a.b("									</span>\r");a.b("\n"+b);a.b("								</div>\r");a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("							</tr>\r");a.b("\n"+b);a.b("							<tr>\r");a.b("\n"+b);a.b("								<td></td>\r");a.b("\n"+b);a.b("								<td>\r");a.b("\n"+b);a.b('									<div class="login_notice reg_right"  data-type="notice" style="display:none;">\r');a.b("\n"+b);a.b('										<i class="login_icon login_icon_error"></i>验证码输入错误，请重新输入\r');a.b("\n"+b);a.b("									</div>\r");a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("							</tr>\r");a.b("\n"+b);a.b("							<tr>\r");a.b("\n"+b);a.b("								<td></td>\r");a.b("\n"+b);a.b("								<td>\r");a.b("\n"+b);a.b('									<div class="login_submit">\r');a.b("\n"+b);a.b('									<button class="login_icon login_btn_orange" type="submit" data-type="login">提 &nbsp; 交</button>\r');a.b("\n"+b);a.b("									</div>\r");a.b("\n"+b);a.b("								</td>\r");a.b("\n"+b);a.b("							</tr>\r");a.b("\n"+b);a.b("						</tbody>\r");a.b("\n"+b);a.b("					</table>\r");a.b("\n"+b);a.b("				</form>\r");a.b("\n"+b);a.b("			</div>\r");a.b("\n"+b);a.b("		</div>\r");a.b("\n"+b);a.b("	</div>\r");a.b("\n"+b);a.b("</div>");return a.fl();});(function(b){if(typeof b.QNR==="undefined"){b.QNR={};}if(typeof b.QNR.login==="undefined"){b.QNR.login={};}var d={};d.getVerifyCode="//user.qunar.com/webApi/logincode.jsp";d.loginNormal="//user.qunar.com/webApi/logins.jsp";d.loginMobile="//user.qunar.com/webApi/logincodeverify.jsp";var a=new QNR.lang.Interface("AjaxHandler",["getVerifyCode","loginNormal","loginMobile"]);var c=function(e){QNR.lang.Interface.ensureImplements(this,a);this.proxy=e;};c.prototype={handler:function(e,h,j){var g=b.location.protocol;var f=QNR.util.CrossDomainXhr.createXhrObject();if(f){QNR.util.CrossDomainXhr.request(f,"post",g+e,h,j);}else{QNR.util.crossDomainPostUserCenter(g+e+"?callbacktype=1",h,this.proxy||"/proxy.htm",{onsuccess:j.success});}},getVerifyCode:function(e,f){this.handler(d.getVerifyCode,e,f);},loginNormal:function(e,f){this.handler(d.loginNormal,e,f);},loginMobile:function(e,f){this.handler(d.loginMobile,e,f);}};QNR.login.LoginHandler=c;})(this);(function(f){var a=null;var b=function(h){a=this;var j={name:"QunarPopBox",title:"登 录",width:"352px",content:"",skin:"",hasBg:true,callback:false,proxy:false};var h=f.extend(j,h);a.options=h;};b.fn=b.prototype;b.fn.close=function(){var h=a.options.name;var j=h+"BG";if(document.getElementById(j)){f("#"+j).remove();}if(document.getElementById(h)){f("#"+h).remove();}f(window).unbind("scroll");var k=a.options.callback;if(k&&k.close){k.close.call(null);}};b.fn.init=function(){a.close();a.addDom();a.showBg();a.showBox();a.showEvent();};b.fn.addDom=function(){f("body").append(a.options.content);};b.fn.showBg=function(){if(a.options.hasBg){var j=a.options.name;var k=j+"BG";var l=!-[1,]&&!window.XMLHttpRequest;if(!l){var h='<div class="q_widget_login_mask" id="'+k+'" style="position:fixed"></div>';f("body").append(h);}else{var h='<div class="q_widget_login_mask" id="'+k+'" style="position:absolute;height:'+f(document).height()+'px;"></div>';f("body").append(h);}}};b.fn.showBox=function(){var l=a.options.name;var p=!-[1,]&&!window.XMLHttpRequest;if(!p){var o=f("#"+l),m=o.width(),k=o.height(),j=f(window).width(),h=f(window).height(),n=f(window).scrollTop();o.css({position:"fixed",top:(h/2)-(k/2),left:(j/2)-(m/2)});}else{var o=f("#"+l),m=o.width(),k=o.height(),j=f(window).width(),h=f(window).height(),n=f(window).scrollTop();o.css({position:"absolute",top:(h/2)-(k/2)+n,left:(j/2)-(m/2)});f(window).bind("scroll",function(){var w=f("#"+l),u=w.width(),s=w.height(),r=f(window).width(),q=f(window).height(),v=f(window).scrollTop();w.css({position:"absolute",top:(q/2)-(s/2)+v,left:(r/2)-(u/2)});});}f(window).resize(function(){o=f("#"+l),m=o.width(),k=o.height(),j=f(window).width(),h=f(window).height(),n=f(window).scrollTop();if(!p){o.css({top:(h/2)-(k/2),left:(j/2)-(m/2)});}else{o.css({position:"absolute",top:(h/2)-(k/2)+n,left:(j/2)-(m/2)});}});f("#"+l).show();};b.fn.showEvent=function(){var h=a.options.name;f("#"+h).find("#"+h+"ClosePop").bind("click",function(){b.fn.close();});};var c={};c.regexp={username:/^.{2,100}$/,mobilePassword:/^.{4,30}$/,password:/^[0-9a-zA-Z\~\!\@\#\$%\^&\*\(\)\-\_\=\+\;\:\'\"\,\<\.\>\/\?\\]{6,30}$/,mobile:/^1[0-9]{10}$/,email:/^[a-zA-Z0-9_+.-]+@([a-zA-Z0-9-]+\.)+[a-z0-9]{2,4}$/i,vcode:/^[0-9a-zA-Z]{4}$/,limit:{emailMin:5,emailMax:80}};c.util={testString:function(h,j){h=typeof(h)=="string"&&c.util.trim(h)||"";return j.test(h);},validUsername:function(h){return c.util.testString(h,c.regexp.username);},validMobile:function(h){return c.util.testString(h,c.regexp.mobile);},validEmail:function(h){return h.length>=c.regexp.limit.emailMin&&h.length<=c.regexp.limit.emailMax&&c.util.testString(h,c.regexp.email);},validPassword:function(h){return c.util.testString(h,c.regexp.password);},validMobilePassword:function(h){return c.util.testString(h,c.regexp.mobilePassword);},validVcode:function(h){return c.util.testString(h,c.regexp.vcode);},trim:function(h){return h.replace(/(^\s*)(\s*$)/g,"");}};var e=null;f.LoginPop=function(h){var k=window.location.host;document.domain=k.match(/(\w+\.(?:com.cn|com|cn|net|org|cc|co|info))(:[0-9]{1,4})?(?:\/|$)/)[1];var j=document.domain?"?d="+document.domain:"";h.proxy=h.proxy?h.proxy+j:"/proxy.htm"+j;h.protocol=document.location.protocol?document.location.protocol:"http:";h.regFlag=h.regFlag===undefined?true:h.regFlag;h.twoWeek=h.twoWeek===undefined?true:h.twoWeek;h.imageCheck=h.protocol==="https:"?"https://user.qunar.com/captcha/api/image?k={g3njj(t":"http://captcha1.pbs.qunar.com/api/image?k={g3njj(t";if(h.union){h.width="655px";}e=this;e.options=h;if(h.type==="reg"){new d(h);}else{e.init();}};f.LoginPop.fn=f.LoginPop.prototype;f.LoginPop.fn.init=function(){var k=e.options;var j=e.getContent();k.content=j;var h=new b(k);h.init();e.showEvent();e.bindNormal();};f.LoginPop.fn.getContent=function(){e.options.name="QunarPopBox";e.options.mask=true;e.options.className="q_widget_login";var h=QTMPL.LoginLayer.render(e.options);return h;};f.LoginPop.fn.showEvent=function(){var h=e.options.name?e.options.name:a.options.name;f("#"+h+"vcodeImg").trigger("click");f("#"+h).find("a[name='"+h+"vcodeImg'],a[name='"+h+"vcodeImgMobile']").bind("click",function(j){j.preventDefault();var k=f(this).attr("name");f("#"+k).trigger("click");});f("#"+h).find("input[name='loginType']").bind("click",function(){var j=f(this).val();if(j==="normal"){f("#"+h+"vcodeImg").trigger("click");f("#"+h).find("input[name='loginType']").closest("span").removeClass("active");f(this).closest("span").addClass("active");f("#remeber_pass").html('<a class="f_r" href="http://user.qunar.com/passport/forgotpwd.jsp" target="_blank">忘记密码？</a>');f("#"+h).find("div[data-type='normal']").show();f("#"+h).find("div[data-type='mobile']").hide();e.bindNormal();f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();f("#"+h).find("div[name='login_remeber']").show();}else{if(j==="mobile"){f("#"+h+"vcodeImgMobile").trigger("click");f("#"+h).find("input[name='loginType']").closest("span").removeClass("active");f(this).closest("span").addClass("active");if(e.options.twoWeek){f("#remeber_pass").html("");}else{f("#"+h).find("div[name='login_remeber']").hide();}f("#"+h).find("div[data-type='normal']").hide();f("#"+h).find("div[data-type='mobile']").show();e.bindMobile();f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();}}});f("#"+h).find("[data-type='login']").bind("click",function(j){j.preventDefault();e.login();});};f.LoginPop.fn.checkEmailOrMobile=function(k){var h=e.options.name?e.options.name:a.options.name;if(!c.util.validUsername(k)&&!c.util.validMobile(k)&&!c.util.validEmail(k)){var j="请输入注册手机或邮箱或用户名";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("input[name='username']").parent().parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};f.LoginPop.fn.checkMobile=function(k){var h=e.options.name?e.options.name:a.options.name;if(!c.util.validMobile(k)){var j="请输入注册的手机号码";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("input[name='mobile']").parent().parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};f.LoginPop.fn.checkPassword=function(k){var h=e.options.name?e.options.name:a.options.name;if(!c.util.validPassword(k)){var j="请输入正确的密码格式";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("input[name='password']").parent().parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};f.LoginPop.fn.checkMobilePassword=function(k){var h=e.options.name?e.options.name:a.options.name;if(!c.util.validMobilePassword(k)){var j="请输入获取的动态密码";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("[name='randcode']").parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};f.LoginPop.fn.checkVode=function(j){var h=e.options.name?e.options.name:a.options.name;var l=f("#"+h).find("[name='vcode"+j+"']").val();if(!c.util.validVcode(l)){var k="请输入图片验证码";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+k+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("[name='vcode"+j+"']").addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};f.LoginPop.fn.bindNormal=function(){var j=e.options.name?e.options.name:a.options.name;var h=f("#"+j).find("input[name='username']").val();if(h!=""){var l=f("#"+j).find("input[name='username']").parent().parent().find("label");l.hide();}var k=f("#"+j).find("input[name='password']").val();if(k!=""){var l=f("#"+j).find("input[name='password']").parent().parent().find("label");l.hide();}f(".uin_tips").click(function(){f(this).parent().find(".txt-login-input").trigger("focus");});f("#"+j).find("input[type='text'],input[type='password']").focus(function(){f(this).parent().parent().removeClass("login_active");f(this).parent().removeClass("login_active");f(this).removeClass("login_active");var m=f(this).parent().parent().find("label");m.addClass("focus");}).blur(function(){var n=f(this).parent().parent().find("label");if(f(this).val()===""){n.show();n.removeClass("focus");}else{var p=f(this).attr("name");if(p==="username"){var o=f("#"+j).find("input[name='username']").val();e.checkEmailOrMobile(o);}else{if(p==="password"){var m=f("#"+j).find("input[name='password']").val();e.checkPassword(m);}else{if(p==="vcode"){e.checkVode("");}}}}}).keydown(function(){var m=f(this).parent().parent().find("label");if(f(this).val()!=""){m.hide();}}).keyup(function(){var m=f(this).parent().parent().find("label");if(f(this).val()!=""){m.hide();}}).change(function(){var m=f(this).parent().parent().find("label");if(f(this).val()!=""){m.hide();}});};f.LoginPop.fn.bindMobile=function(){var h=e.options.name?e.options.name:a.options.name;f(".uin_tips").click(function(){f(this).parent().find(".txt-login-input").trigger("focus");});f("#"+h).find("input[type='text']").focus(function(){f(this).parent().parent().find(".login_active").removeClass("login_active");var j=f(this).parent().parent().find("label");j.addClass("focus");}).blur(function(){var l=f(this).parent().parent().find("label");if(f(this).val()===""){l.show();l.removeClass("focus");}else{var m=f(this).attr("name");if(m==="mobile"){var j=f("#"+h).find("input[name='mobile']").val();e.checkMobile(j);}else{if(m==="vcodeMobile"){e.checkVode("Mobile");}else{if(m==="randcode"){var k=f("#"+h).find("input[name='randcode']").val();e.checkMobilePassword(k);}}}}}).keydown(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}}).keyup(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}}).change(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}});f("#"+h).find("[data-type='getVerifyCode']").bind("click",function(j){j.preventDefault();e.getVerifyCode();});};f.LoginPop.fn.login=function(){function h(k){var l=document.getElementsByName(k);for(i=0;i<l.length;i++){if(l[i].checked){return l[i].value;}}return"undefined";}var j=h("loginType");if(j==="normal"){e.loginNormal();}else{if(j==="mobile"){e.loginMobile();}}};f.LoginPop.fn.getVerifyCode=function(){var j=e.options.name?e.options.name:a.options.name;var k=null;var h=f("#"+j).find("input[name='mobile']").val();if(!e.checkMobile(h)){return;}if(!e.checkVode("Mobile")){return;}function m(){var p=f("#"+j).find("[data-type='count']").html();var q=parseInt(p);q=q-1;if(q>0){f("#"+j).find("[data-type='count']").html(q);}else{f("#"+j).find("[data-type='getVerifyCode']").html('<a class="f_r login_icon login_btn_blue" href="javascript:;">获取手机动态码</a>');clearInterval(k);f("#"+j).find("[data-type='getVerifyCode']").bind("click",function(){e.getVerifyCode();});}}var o={};o.mobile=h;o.vcode=f("#"+j).find("[name='vcodeMobile']").val();var l={success:function(p){if(p.ret===true){f("#"+j).find("[data-type='getVerifyCode']").html('<span class="f_r login_btn_gray"><span data-type="count">59</span>秒后重新获取</span>');k=setInterval(m,1000);f("#"+j).find("[data-type='getVerifyCode']").unbind();f("#"+j).find(".login_active").removeClass("login_active");f("#"+j).find("[data-type='notice']").hide();f("#"+j).find("[data-type='notice']").html("");}else{f("#"+j+"vcodeImgMobile").trigger("click");f("#"+j).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+p.errmsg+"</span>");f("#"+j).find("[data-type='notice']").show();}},failure:function(p){throw new Error("failure: api status is "+p);}};var n=new QNR.login.LoginHandler(e.options.proxy);n.getVerifyCode(o,l);};f.LoginPop.fn.loginNormal=function(){var j=e.options.name?e.options.name:a.options.name;var o=f("#"+j).find("input[name='username']").val();var h=f("#"+j).find("input[name='password']").val();var n=f("#"+j).find("input[name='remember']").attr("checked");n=n?"1":"0";if(!e.checkEmailOrMobile(o)){return;}if(!e.checkPassword(h)){return;}if(!e.checkVode("")){return;}var m={};m.username=o;m.password=h;m.remember=n;m.vcode=f("#"+j).find("[name='vcode']").val();f("#"+j).find("[name='vcode']").val("");var k={success:function(q){if(q.ret===true){var r=q.data;var s=e.options.callback;if(s){if(s.success){s.success.call(null,r);}else{s.call(null,r);}}var p=new b(e.options);p.close();}else{f("#"+j).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+q.errmsg+"</span>");f("#"+j).find("[data-type='notice']").show();f("#"+j+"vcodeImg").trigger("click");}},failure:function(p){throw new Error("failure: api status is "+p);}};var l=new QNR.login.LoginHandler(e.options.proxy);l.loginNormal(m,k);};f.LoginPop.fn.loginMobile=function(l){var k=e.options.name?e.options.name:a.options.name;var j=f("#"+k).find("input[name='mobile']").val();var h=f("#"+k).find("input[name='randcode']").val();if(!e.checkMobile(j)){return;}if(!e.checkMobilePassword(h)){return;}var p=f("#"+k).find("input[name='remember']").attr("checked");p=p?"1":"0";var o={};o.mobile=j;o.logincode=h;o.remember=p;o.vcode=f("#"+k).find("[name='vcodeMobile']").val();var m={success:function(r){if(r.ret===true){var s=r.data;var u=e.options.callback;if(u){if(u.success){u.success.call(null,s);}else{u.call(null,s);}}var q=new b(e.options);q.close();}else{f("#"+k).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+r.errmsg+"</span>");f("#"+k).find("[data-type='notice']").show();}},failure:function(q){throw new Error("failure: api status is "+q);}};var n=new QNR.login.LoginHandler(e.options.proxy);n.loginMobile(o,m);};var g=null;var d=function(h){g=this;g.options=h;g.init();};d.fn=d.prototype;d.fn.init=function(){var k=g.options;var j=g.getContent();k.content=j;k.title=k.title?k.title:"快速注册";var h=new b(k);h.init();g.showEvent();f("#vcodeImg").attr("src",e.options.imageCheck+"&amp;t="+new Date().getTime());};d.fn.getContent=function(){g.options.name="QunarPopBox";g.options.className="q_widget_login";var h=QTMPL.RegLayer.render(g.options);return h;};d.fn.checkMobile=function(j){var h=g.options.name?g.options.name:a.options.name;if(!c.util.validMobile(j)){f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>不是正确的手机格式</span>');f("#"+h).find("[data-type='notice']").show();f("#"+h).find("input[name='mobile']").parent().parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};d.fn.checkVode=function(){var h=g.options.name?g.options.name:a.options.name;var k=f("#"+h).find("[name='vcode']").val();if(!c.util.validVcode(k)){var j="请输入图片验证码";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("[name='vcode']").addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};d.fn.checkMobilePassword=function(k){var h=g.options.name?g.options.name:a.options.name;if(!c.util.validMobilePassword(k)){var j="请输入获取的动态密码";f("#"+h).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+j+"</span>");f("#"+h).find("[data-type='notice']").show();f("#"+h).find("[name='randcode']").parent().addClass("login_active");return false;}else{f("#"+h).find("[data-type='notice']").html("");f("#"+h).find("[data-type='notice']").hide();return true;}};d.fn.showEvent=function(){var h=g.options.name?g.options.name:a.options.name;f("#"+h+"vcodeImg").trigger("click");f(".uin_tips").click(function(){f(this).parent().find(".txt-login-input").trigger("focus");});f("#"+h).find("input[type='text']").focus(function(){f(this).parent().parent().removeClass("login_active");f(this).parent().removeClass("login_active");f(this).removeClass("login_active");var j=f(this).parent().parent().find("label");j.addClass("focus");}).blur(function(){var l=f(this).parent().parent().find("label");if(f(this).val()===""){l.show();l.removeClass("focus");}else{var m=f(this).attr("name");if(m==="mobile"){var j=f("#"+h).find("input[name='mobile']").val();e.checkMobile(j);}else{if(m==="vcode"){e.checkVode("");}else{if(m==="randcode"){var k=f("#"+h).find("input[name='randcode']").val();e.checkMobilePassword(k);}}}}}).keydown(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}}).keyup(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}}).change(function(){var j=f(this).parent().parent().find("label");if(f(this).val()!=""){j.hide();}});f("#"+h).find("[data-type='getVerifyCode']").bind("click",function(j){j.preventDefault();g.getVerifyCode();});f("#"+h).find("[data-type='login']").bind("click",function(j){j.preventDefault();g.register();});};d.fn.getVerifyCode=function(){var k=g.options.name?g.options.name:a.options.name;function m(){var q=f("#"+k).find("[data-type='count']").html();var r=parseInt(q);r=r-1;if(r>0){f("#"+k).find("[data-type='count']").html(r);}else{f("#"+k).find("[data-type='getVerifyCode']").html('<a class="right login_icon login_btn_blue" href="javascript:;" >免费获取</a>');clearInterval(t);f("#"+k).find("[data-type='getVerifyCode']").bind("click",function(){g.getVerifyCode();});}}var j=f("#"+k).find("input[name='mobile']").val();var p=f("#"+k).find("input[name='vcode']").val();var h=g.checkMobile(j);if(!h){return;}if(!g.checkVode()){return;}var o={};o.mobile=j;o.vcode=p;o.action="register";var l={success:function(q){if(q.ret===true){f("#"+k).find("[data-type='getVerifyCode']").html('<span class="f_r login_btn_gray"><span data-type="count">59</span>秒后重新获取</span>');t=setInterval(m,1000);f("#"+k).find("[data-type='getVerifyCode']").unbind();}else{f("#"+k).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+q.errmsg+"</span>");f("#"+k).find("[data-type='notice']").show();}f("#vcodeImg").trigger("click");},failure:function(q){throw new Error("failure: api status is "+q);}};var n=new QNR.login.LoginHandler(g.options.proxy);n.getVerifyCode(o,l);};d.fn.register=function(){var l=g.options.name?g.options.name:a.options.name;var k=f("#"+l).find("input[name='mobile']").val();var j=g.checkMobile(k);if(!j){return;}var h=f("#"+l).find("input[name='randcode']").val();if(!g.checkMobilePassword(h)){return;}var o={};o.mobile=k;o.logincode=h;o.remember="0";o.action="register";var m={success:function(q){if(q.ret===true){var r=q.data;var s=g.options.callback;if(s){if(s.success){s.success.call(null,r);}else{s.call(null,r);}}var p=new b(g.options);p.close();}else{f("#"+l).find("[data-type='notice']").html('<i class="login_icon login_icon_error"></i><span>'+q.errmsg+"</span>");f("#"+l).find("[data-type='notice']").show();}f("#vcodeImg").trigger("click");},failure:function(p){throw new Error("failure: api status is "+p);}};var n=new QNR.login.LoginHandler(g.options.proxy);n.loginMobile(o,m);};})(jQuery);